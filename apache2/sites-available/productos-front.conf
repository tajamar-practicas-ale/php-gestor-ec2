<VirtualHost *:80>
    ServerName 98.84.116.254
    DocumentRoot /var/www/productos-front

    <Directory /var/www/productos-front>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted

        <IfModule mod_rewrite.c>
    RewriteEngine On

	    # Si el archivo o directorio existe, no reescribas
	    RewriteCond %{REQUEST_FILENAME} -f [OR]
	    RewriteCond %{REQUEST_FILENAME} -d
	    RewriteRule ^ - [L]
	
	    # Si no existe, sirve index.html (para React Router)
	    RewriteRule ^ /index.html [L]
	</IfModule>

    </Directory>

    # Cacheo de archivos estáticos
    <FilesMatch "\.(js|css|png|jpg|jpeg|gif|ico|svg)$">
        Header set Cache-Control "max-age=86400, public"
    </FilesMatch>

    # Protección del acceso a archivos fuente
    <FilesMatch "\.(json|md|env)$">
        Require all denied
    </FilesMatch>

    ErrorLog ${APACHE_LOG_DIR}/productos-front-error.log
    CustomLog ${APACHE_LOG_DIR}/productos-front-access.log combined

    AddType application/javascript .js
</VirtualHost>
